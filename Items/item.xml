<?xml version="1.0" encoding="utf-8"?>
<Items>
    <!--君王-->
    <Item name="君王" identifier="Touhou_Monarch" category="Weapon" cargocontaineridentifier="metalcrate" subcategory="Touhou"
          tags="mediumitem,weapon,gun,mountableweapon,Touhou_Cam_Offset_Normal" Scale="0.25" impactsoundtag="impact_metal_light" >
        <PreferredContainer primary="secarmcab" secondary="armcab,weaponholder"/>
        <Price baseprice="3000" sold="false" >
            <Price storeidentifier="merchantoutpost" multiplier="1.1" />
            <Price storeidentifier="merchantcity" multiplier="0.9" />
            <Price storeidentifier="merchantresearch" multiplier="1.1" />
            <Price storeidentifier="merchantmilitary" multiplier="0.9" />
            <Price storeidentifier="merchantmine" multiplier="1.05" />
        </Price>
        <Deconstruct time="3">
            <Item identifier="Touhou_Plant_Extract" amount="12"/>
            <Item identifier="titaniumaluminiumalloy" amount="2"/>
            <Item identifier="plastic" amount="2"/>
        </Deconstruct>
        <InventoryIcon texture="%ModDir%/Images/Touhou_Monarch.png" sourcerect="400,0,197,140" origin="0.5,0.5" />
        <Sprite texture="%ModDir%/Images/Touhou_Monarch.png" depth="0.4" sourcerect="0,0,400,102" />
        <Body width="429" height="96" density="10" />
        <Holdable slots="Any,RightHand+LeftHand" controlpose="true" holdpos="55,0" aimpos="70,-5" handle1="-55,-15" handle2="24,25" holdangle="-30" msg="ItemMsgPickUpSelect">
            <StatusEffect type="OnSecondaryUse" target="Character" SpeedMultiplier="0.75" setvalue="true" />
            <StatusEffect type="OnUse" target="Character" SpeedMultiplier="0.5" setvalue="true" />
        </Holdable>
        <CustomInterface canbeselected="true" drawhudwhenequipped="true">
            <GuiFrame relativesize="0.08,0.32" anchor="BottomLeft" absoluteoffset="20,95" style="ItemUI" />
            <Button text="弹药1">
                <StatusEffect type="OnUse" target="Contained" targetslot="0" disabledeltatime="true">
                    <Remove />
                </StatusEffect>
                <StatusEffect type="OnUse" target="This" targetslot="0" disabledeltatime="true" delay="0.1">
                    <SpawnItem identifier="Touhou_Monarch_Ammo01" spawnposition="ThisInventory" />
                </StatusEffect>
            </Button>
            <Button text="弹药2">
                <StatusEffect type="OnUse" target="Contained" targetslot="0" disabledeltatime="true">
                    <Remove />
                </StatusEffect>
                <StatusEffect type="OnUse" target="This" targetslot="0" disabledeltatime="true" delay="0.1">
                    <SpawnItem identifier="Touhou_Monarch_Ammo02" spawnposition="ThisInventory" />
                </StatusEffect>
            </Button>
        </CustomInterface>
        <RangedWeapon barrelpos="180,10" weapondamagemodifier="1.0" spread="3" combatPriority="80" ReloadSkillRequirement="Touhou_Magic" maxchargetime="0.0"
                      Reload="0.2" ReloadNoSkill="0.4" holdtrigger="true" drawhudwhenequipped="true" crosshairscale="0.2">
            <Crosshair texture="Content/Items/Weapons/Crosshairs.png" sourcerect="0,256,256,256" />
            <CrosshairPointer texture="Content/Items/Weapons/Crosshairs.png" sourcerect="256,256,256,256" />
            <ParticleEmitter particle="muzzleflash" particleamount="1" velocitymin="0" velocitymax="0" colormultiplier="255,255,255,255" />
            <Sound file="Content/Items/Weapons/SMGsingleShot1.ogg" type="OnUse" range="3000" selectionmode="Random" />
            <Sound file="Content/Items/Weapons/SMGsingleShot2.ogg" type="OnUse" range="3000" />
            <Sound file="Content/Items/Weapons/SMGsingleShot3.ogg" type="OnUse" range="3000" />
            <Sound file="Content/Items/Weapons/SMGsingleShot4.ogg" type="OnUse" range="3000" />
            <Sound file="Content/Items/Weapons/SMGsingleShot5.ogg" type="OnUse" range="3000" />
            <Sound file="Content/Items/Weapons/SMGsingleShot6.ogg" type="OnUse" range="3000" />
            <StatusEffect type="OnUse" target="This" forceplaysounds="true">
                <ParticleEmitter particle="casingfirearm" particleamount="1" colormultiplier="255,255,255,255" ScaleMultiplier="1.5,1.5" anglemin="90" anglemax="150" velocitymin="50" velocitymax="250" CopyEntityAngle="true" />
                <Explosion range="300.0" force="0.6" shockwave="false" smoke="false" flash="true" sparks="false" flames="false" underwaterbubble="false" camerashake="10.0" />
            </StatusEffect>
            <StatusEffect type="OnUse" target="Contained">
                <RequiredItems items="Touhou_Monarch_Ammo" type="Contained" msg="ItemMsgAmmoRequired" />
                <Use />
            </StatusEffect>
            <RequiredItems items="Touhou_Monarch_Ammo" type="Contained" msg="ItemMsgAmmoRequired" />
            <RequiredSkill identifier="weapons" level="60" />
        </RangedWeapon>
        <ItemContainer capacity="1" maxstacksize="1" hideitems="false" containedstateindicatorstyle="bullet" containedstateindicatorslot="0" containedspritedepth="0.56">
            <Containable items="Touhou_Monarch_Ammo" hide="true" setactive="true"/>
            <SlotIcon slotindex="0" texture="Content/UI/StatusMonitorUI.png" sourcerect="256,448,64,64" origin="0.5,0.5" />
        </ItemContainer>
        <aitarget sightrange="2000" soundrange="2000" fadeouttime="5" />
        <SkillRequirementHint identifier="weapons" level="60" />
    </Item>

    <!--弹药1-->
    <Item name="弹药1" identifier="Touhou_Monarch_Ammo01" maxstacksize="16" maxstacksizecharacterinventory="4" scale="0.4" subcategory="Touhou"
          Health="50" category="Weapon" cargocontaineridentifier="metalcrate" tags="smallitem,Touhou_Monarch_Ammo,Touhou_Magic_Charging03" impactsoundtag="impact_metal_light">
        <PreferredContainer secondary="secarmcab" />
        <Price baseprice="200" sold="false">
            <Price storeidentifier="merchantoutpost" sold="false" multiplier="1.5" />
            <Price storeidentifier="merchantcity" multiplier="1.25" minavailable="2" sold="false" />
            <Price storeidentifier="merchantresearch" sold="false" multiplier="1.25" />
            <Price storeidentifier="merchantmilitary" multiplier="0.9" minavailable="4" />
            <Price storeidentifier="merchantmine" sold="false" multiplier="1.25" />
            <Price storeidentifier="merchantarmory" multiplier="0.9" minavailable="4" />
        </Price>
        <Deconstruct time="3">
            <Item identifier="Reiki_Stone" amount="8" />
            <Item identifier="titaniumaluminiumalloy" amount="2"/>
        </Deconstruct>
        <Fabricate suitablefabricators="Magic_Altar" requiredtime="10" >
            <RequiredSkill identifier="Touhou_Magic" level="50" />
            <RequiredItem identifier="titaniumaluminiumalloy" amount="2" />
            <RequiredItem identifier="Reiki_Stone" amount="6" />
            <RequiredItem identifier="Touhou_Simple_Parts" />
        </Fabricate>
        <Fabricate suitablefabricators="Magic_Altar" requiredtime="10" displayname="recycleitem" >
            <RequiredSkill identifier="Touhou_Magic" level="50" />
            <RequiredItem identifier="Reiki_Stone" amount="4" />
            <RequiredItem identifier="magnesium" />
            <RequiredItem identifier="Touhou_Labyrinth_Ammo01" mincondition="0.0" maxcondition="0.5" usecondition="false" />
        </Fabricate>
        <Sprite texture="%ModDir%/Images/Touhou_Monarch.png" depth="0.54" sourcerect="0,102,55,100" origin="0.5,0.5" />
        <Body width="44" height="56" density="10" />
        <ItemContainer hideitems="true" capacity="1" drawinventory="false" canbeselected="false" SpawnWithId="Touhou_Monarch_Round01" ShowConditionInContainedStateIndicator="true" removecontaineditemsondeconstruct="true" containedstateindicatorstyle="bullet">
            <Containable items="Touhou_Magic_Danmu" />
            <StatusEffect type="OnUse" target="This" condition="-10" disabledeltatime="true" >
                <SpawnItem identifiers="Touhou_Monarch_Round01" spawnposition="ThisInventory" />
            </StatusEffect>
        </ItemContainer>
        <Holdable canBeCombined="true" slots="Any,RightHand,LeftHand" handle1="0,0" msg="ItemMsgPickUpSelect" />
    </Item>

    <!--弹药2-->
    <Item name="弹药2" identifier="Touhou_Monarch_Ammo02" maxstacksize="16" maxstacksizecharacterinventory="3" scale="0.4" subcategory="Touhou"
          Health="150" category="Weapon" cargocontaineridentifier="metalcrate" tags="smallitem,Touhou_Monarch_Ammo,Touhou_Magic_Charging04" impactsoundtag="impact_metal_light">
        <PreferredContainer secondary="secarmcab" />
        <Price baseprice="200" sold="false">
            <Price storeidentifier="merchantoutpost" sold="false" multiplier="1.5" />
            <Price storeidentifier="merchantcity" multiplier="1.25" minavailable="2" sold="false" />
            <Price storeidentifier="merchantresearch" sold="false" multiplier="1.25" />
            <Price storeidentifier="merchantmilitary" multiplier="0.9" minavailable="4" />
            <Price storeidentifier="merchantmine" sold="false" multiplier="1.25" />
            <Price storeidentifier="merchantarmory" multiplier="0.9" minavailable="4" />
        </Price>
        <Deconstruct time="3">
            <Item identifier="Reiki_Stone" amount="8" />
            <Item identifier="titaniumaluminiumalloy" amount="2"/>
        </Deconstruct>
        <Fabricate suitablefabricators="Magic_Altar" requiredtime="10" amount="3" >
            <RequiredSkill identifier="Touhou_Magic" level="50" />
            <RequiredItem identifier="titaniumaluminiumalloy" amount="6" />
            <RequiredItem identifier="Magic_Material" amount="2" />
            <RequiredItem identifier="uex" amount="3" />
            <RequiredItem identifier="Touhou_Precision_Parts" />
        </Fabricate>
        <Fabricate suitablefabricators="Magic_Altar" requiredtime="10" displayname="recycleitem" >
            <RequiredSkill identifier="Touhou_Magic" level="50" />
            <RequiredItem identifier="Reiki_Stone" amount="4" />
            <RequiredItem identifier="titaniumaluminiumalloy" />
            <RequiredItem identifier="uex" />
            <RequiredItem identifier="Touhou_Labyrinth_Ammo02" mincondition="0.0" maxcondition="0.5" usecondition="false" />
        </Fabricate>
        <Fabricate suitablefabricators="Magic_Altar" requiredtime="10" displayname="recycleitem" >
            <RequiredSkill identifier="Touhou_Magic" level="50" />
            <RequiredItem identifier="Reiki_Stone" amount="4" />
            <RequiredItem identifier="titaniumaluminiumalloy" amount="3" />
            <RequiredItem identifier="nitroglycerin" mincondition="0" maxcondtion="100" usecondition="false" />
            <RequiredItem identifier="Touhou_Labyrinth_Ammo02" mincondition="0.0" maxcondition="0.5" usecondition="false" />
        </Fabricate>
        <Sprite texture="%ModDir%/Images/Touhou_Monarch.png" depth="0.54" sourcerect="55,102,56,100" origin="0.5,0.5" />
        <Body width="44" height="56" density="10" />
        <ItemContainer hideitems="true" capacity="1" drawinventory="false" canbeselected="false" SpawnWithId="Touhou_Monarch_Round02" ShowConditionInContainedStateIndicator="true" removecontaineditemsondeconstruct="true" containedstateindicatorstyle="bullet">
            <Containable items="Touhou_Magic_Danmu" />
            <StatusEffect type="OnUse" target="This" condition="-1" disabledeltatime="true" >
                <SpawnItem identifiers="Touhou_Monarch_Round02" spawnposition="ThisInventory" />
            </StatusEffect>
        </ItemContainer>
        <Holdable canBeCombined="true" slots="Any,RightHand,LeftHand" handle1="0,0" msg="ItemMsgPickUpSelect" />
    </Item>


    <!--射弹1-->
    <Item name="射弹1" identifier="Touhou_Monarch_Round01" category="Weapon" interactthroughwalls="true" cargocontaineridentifier="metalcrate"
          tags="Touhou_Magic_Danmu" impactsoundtag="impact_metal_light" hideinmenus="true" scale="0.5">
        <Sprite texture="%ModDir%/Images/Touhou_Monarch.png" sourcerect="110,105,222,36" depth="0.55" origin="0.5,0.5" />
        <Body width="150" height="10" density="10" gravityscale="0.2" />
        <Pickable slots="Any" msg="ItemMsgPickUpSelect" />
        <LightComponent LightColor="220,200,80,200" Range="0" powerconsumption="0" IsOn="true" >
            <sprite texture="%ModDir%/Images/Touhou_Monarch.png" sourcerect="110,105,222,36" origin="0.5,0.5" />
        </LightComponent>
        <LightComponent LightColor="220,200,80,200" Range="50" powerconsumption="0" IsOn="true" >
            <sprite texture="%ModDir%/Images/Touhou_Monarch.png" sourcerect="110,105,1,1" origin="0.5,0.5" />
        </LightComponent>
        <Projectile characterusable="false" launchimpulse="30" sticktocharacters="true" sticktolighttargets="true">
            <ParticleEmitter particle="tracerfirearm" particleamount="1" velocitymin="0" velocitymax="0" colormultiplier="55,150,55,205" scalemultiplier="1,1.2" />
            <Attack itemdamage="5" severlimbsprobability="0.25" penetration="0.1">
                <Affliction identifier="lacerations" strength="20" />
                <Affliction identifier="stun" strength="0.2" probability="0.2" />
                <Affliction identifier="stun" strength="0.1" probability="0.1" />
            </Attack>
            <StatusEffect type="OnImpact" target="UseTarget">
                <ParticleEmitter particle="spark" copyentityangle="true" anglemin="-10" anglemax="10" particleamount="4" velocitymin="-10" velocitymax="-200"
                                 colormultiplier="255,55,55,195" scalemin="0.5" scalemax="1" />
            </StatusEffect>
            <StatusEffect type="OnImpact" target="UseTarget">
                <Conditional entitytype="eq Structure" />
                <Conditional hastag="eq door" />
                <ParticleEmitter particle="spark" copyentityangle="true" anglemin="-10" anglemax="10" particleamount="4" velocitymin="-10" velocitymax="-200"
                                 colormultiplier="255,55,55,195" scalemin="0.5" scalemax="1" />
            </StatusEffect>
            <StatusEffect type="OnNotContained" target="This" stackable="false" delay="2" checkconditionalalways="true">
                <Conditional IsStuckToTarget="false" />
                <Remove />
            </StatusEffect>
        </Projectile>
    </Item>

    <!--射弹2-->
    <Item name="射弹2" identifier="Touhou_Monarch_Round02" category="Weapon" interactthroughwalls="true" cargocontaineridentifier="metalcrate"
          tags="Touhou_Magic_Danmu" impactsoundtag="impact_metal_light" hideinmenus="true" scale="0.5">
        <Sprite texture="Content/Items/Weapons/TurretsAndDepthCharges.png" sourcerect="140,486,21,21" depth="0.55" />
        <Body width="150" height="10" density="30" gravityscale="0" waterdragcoefficient="0" />
        <Pickable slots="Any" msg="ItemMsgPickUpSelect" />
        <Projectile characterusable="false" launchimpulse="10">
            <ParticleEmitter particle="tracerfirearm" particleamount="1" velocitymin="0" velocitymax="0" colormultiplier="255,10,10,205" scalemultiplier="1,1.2" />
            <Attack itemdamage="8" severlimbsprobability="0.65" penetration="0.2">
                <Affliction identifier="lacerations" strength="25" />
                <Affliction identifier="explosiondamage" strength="5" />
                <Affliction identifier="stun" strength="0.05" probability="0.1" />
                <Affliction identifier="stun" strength="0.1" probability="0.1" />
                <StatusEffect type="OnUse" target="Limb" targetLimbs="Head">
                    <Affliction identifier="explosiondamage" strength="5" />
                    <Affliction identifier="stun" strength="0.1" />
                </StatusEffect>
            </Attack>
            <StatusEffect type="OnActive" target="This" >
                <ParticleEmitter particle="GlowDot" scalemin="1.5" scalemax="2.0" particlespersecond="60" anglemin="0" anglemax="360"
                                 colormultiplier="225,200,100,180"/>
            </StatusEffect>
            <StatusEffect type="OnImpact" target="UseTarget">
                <ParticleEmitter particle="spark" copyentityangle="true" anglemin="-10" anglemax="10" particleamount="4" velocitymin="-10" velocitymax="-200"
                                 colormultiplier="255,55,55,195" scalemin="0.5" scalemax="1" />
            </StatusEffect>
            <StatusEffect type="OnImpact" target="UseTarget">
                <Conditional entitytype="eq Structure" />
                <Conditional hastag="eq door" />
                <ParticleEmitter particle="spark" copyentityangle="true" anglemin="-10" anglemax="10" particleamount="4" velocitymin="-10" velocitymax="-200"
                                 colormultiplier="255,55,55,195" scalemin="0.5" scalemax="1" />
            </StatusEffect>
            <StatusEffect type="OnNotContained" target="This" stackable="false" delay="5">
                <Remove />
            </StatusEffect>
        </Projectile>
    </Item>
</Items>